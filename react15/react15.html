<!DOCTYPE html>
<html>

<head>
  <script src="./react15.js"></script>
  <script src="./babel.js"></script>
  <script type='text/babel'>
    class App1 extends React.Component {
      constructor(props) {
        super(props)
        this.state = {
          num: 0,
        }
      }
      componentDidMount() {
        console.log(1)
      }
      callback = () => {
        this.setState({
          num: this.state.num + 1
        })
      }
      render() {
        return (
          <div>
            <div>{this.state.num}</div>
            <App callback={this.callback}/>
          </div>
        )
      }
    }

    class App extends React.Component {
      constructor(props) {
        super(props)
        this.state = {
          flag: true,
          num: 0,
          error: false,
        }
      }
      click() {
        this.setState({
          flag: !this.state.flag
        })
        this.setState({
          num: this.state.num + 1
        })
        this.props.callback()
      }
      componentWillReceiveProps() {
        this.setState({
          flag: !this.state.flag
        })
        this.setState({
          num: this.state.num + 1
        })
      }
      render() {
        return (
          <div>
            <button onClick={() => this.click()}>{['button1', 'button2']}</button>
            {
              this.state.flag ?
              [<div>2</div>,
              <div>1</div>]
              :
              [<div>1</div>,
              <div>2</div>]
            }
            <div>{[1,2]}</div>
            <div>{this.state.num}</div>
          </div>
        )
      }
    }

    window.onload = function(){
      var s = ReactDOM.render(
      <App1 />, document.getElementById('example'))
    }
  </script>
</head>
<div id="example"></div>

</html>